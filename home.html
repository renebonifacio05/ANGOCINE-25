<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ANGOCINE - Streaming</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script src="catalogo.js" defer></script>

  <script>
    const usuario = JSON.parse(sessionStorage.getItem("usuarioLogado"));
    if (!usuario || Date.now() > usuario.expiraEm) {
      sessionStorage.removeItem("usuarioLogado");
      window.location.href = "index.html";
    }
  </script>

  <style>
    /* üîπ Sidebar ADM */
    .sidebar {
      position: fixed;
      top: 0;
      left: -100%;
      width: 300px;
      height: 100%;
      background: #001f3f;
      color: #fff;
      transition: 0.3s;
      padding: 20px;
      z-index: 1000;
      overflow-y: auto;
    }

    .sidebar.active {
      left: 50%;
      transform: translateX(-50%);
    }

    .sidebar .close-btn {
      font-size: 24px;
      cursor: pointer;
      position: absolute;
      top: 10px;
      right: 20px;
    }

    .admin-circle {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      overflow: hidden;
      margin: 20px auto;
      border: 3px solid #fff;
    }

    .admin-circle img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .sidebar h2 {
      text-align: center;
      margin-top: 10px;
    }

    .sidebar textarea {
      width: 100%;
      margin-top: 15px;
      padding: 10px;
      border-radius: 8px;
      border: none;
      resize: none;
    }

    #send-request {
      width: 100%;
      margin-top: 10px;
      padding: 10px;
      border: none;
      border-radius: 8px;
      background: #1e90ff;
      color: #fff;
      cursor: pointer;
      font-weight: bold;
    }
  </style>
</head>

<body>
  <!-- üîπ Topo -->
  <header class="top-bar">
    <i class="fas fa-bars menu-btn" id="menu-btn"></i>
    <h1>ANGOCINE</h1>
    <i class="fas fa-search" id="search-icon"></i>
    <form id="search-form" action="resultado.html" method="get" style="display:none;">
      <input type="text" name="busca" id="search-input" placeholder="Pesquisar...">
    </form>
  </header>

  <!-- üîπ Banner -->
  <section class="banner" id="banner-container">
    <div class="banner-slides" id="banner-slides"></div>
  </section>

  <!-- üîπ Conte√∫do principal -->
  <main id="conteudo-principal"></main>

  <!-- üîπ Menu inferior -->
  <nav class="bottom-nav">
    <a href="#" data-tipo="inicio" class="ativo"><i class="fas fa-home"></i><span>IN√çCIO</span></a>
    <a href="#" data-tipo="filmes"><i class="fas fa-film"></i><span>FILMES</span></a>
    <a href="#" data-tipo="series"><i class="fas fa-tv"></i><span>S√âRIES</span></a>
    <a href="#" data-tipo="animes"><i class="fas fa-dragon"></i><span>ANIMES</span></a>
    <a href="#" data-tipo="doramas"><i class="fas fa-heart"></i><span>DORAMAS</span></a>
    <a href="#" data-tipo="pagamento"><i class="fas fa-credit-card"></i><span>PAGAMENTO</span></a>
  </nav>

  <!-- üîπ Sidebar ADM -->
  <div id="admin-sidebar" class="sidebar">
    <div class="sidebar-content">
      <span class="close-btn" id="close-sidebar">&times;</span>
      <div class="admin-circle">
        <img src="Screenshot_20251110-144413.jpg" alt="Administrador" class="admin-photo">
      </div>
      <h2>Formiga spy</h2>
      <p>Fa√ßa seu pedido abaixo:</p>
      <textarea placeholder="Digite seu pedido aqui"></textarea>
      <button id="send-request">Enviar Pedido</button>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const bannerSlides = document.getElementById("banner-slides");
      const conteudo = document.getElementById("conteudo-principal");
      const botoes = document.querySelectorAll(".bottom-nav a");

      const filmesBanner = catalogo.filmes.slice(0, 2).map(item => ({...item, tipo: 'filme'}));
      const seriesBanner = catalogo.series.slice(0, 3).map(item => ({...item, tipo: 'serie'}));
      const bannerItens = [...filmesBanner, ...seriesBanner];

      // üîπ Criar slides do banner
      bannerItens.forEach(item => {
        const div = document.createElement("div");
        div.classList.add("slide");
        div.innerHTML = `
          <a href="${item.tipo}.html?slug=${item.slug}">
            <img src="${item.imagem}" alt="${item.titulo}">
            <div class="banner-info">
              <div class="banner-title">${item.titulo}</div>
              <p><span class="banner-stars">${item.nota || '‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ'}</span> 99 votos</p>
            </div>
          </a>
        `;
        bannerSlides.appendChild(div);
      });

      // üîπ Carrossel autom√°tico
      let index = 0;
      function mudarSlide() {
        const total = bannerItens.length;
        index = (index + 1) % total;
        bannerSlides.style.transform = `translateX(-${index * 100}%)`;
      }
      setInterval(mudarSlide, 5000);

      // üîπ Gerar categorias
      function gerarCategoria(titulo, categoria, tipo) {
        if (!catalogo[categoria]) return;
        const section = document.createElement("section");
        section.className = "section";
        section.innerHTML = `
          <div class="section-header"><h3>${titulo}</h3></div>
          <div class="series-container">
            ${catalogo[categoria].map(item => `
              <div class="card ${categoria}">
                <span class="etiqueta">${categoria.toUpperCase()}</span>
                <a href="${tipo}.html?slug=${item.slug}" class="card-link">
                  <img src="${item.imagem}" alt="${item.titulo}">
                  <p>${item.titulo}</p>
                  <p class="card-stars">${item.nota || '‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ'}</p>
                </a>
              </div>
            `).join('')}
          </div>
        `;
        conteudo.appendChild(section);
      }

      function mostrarInicio() {
        conteudo.innerHTML = "";
        gerarCategoria("S√âRIES", "series", "serie");
        gerarCategoria("FILMES", "filmes", "filme");
        gerarCategoria("ANIMES", "animes", "anime");
        gerarCategoria("DORAMAS", "doramas", "dorama");
      }

      // üîπ Alternar categorias
      botoes.forEach(botao => {
        botao.addEventListener("click", e => {
          const tipo = botao.getAttribute("data-tipo");
          if (tipo === "pagamento") {
            window.location.href = "pagamento.html";
            return;
          }
          e.preventDefault();
          botoes.forEach(b => b.classList.remove("ativo"));
          botao.classList.add("ativo");
          tipo === "inicio" ? mostrarInicio() : (conteudo.innerHTML = "", gerarCategoria(tipo.toUpperCase(), tipo, tipo.slice(0, -1)));
        });
      });

      mostrarInicio();

      // üîπ Pesquisa
      const searchIcon = document.getElementById("search-icon");
      const searchForm = document.getElementById("search-form");
      searchIcon.addEventListener("click", () => {
        if (searchForm.style.display === "block") searchForm.style.display = "none";
        else { searchForm.style.display = "block"; searchForm.querySelector("input").focus(); }
      });

      // üîπ Sidebar ADM
      const menuBtn = document.getElementById("menu-btn");
      const sidebar = document.getElementById("admin-sidebar");
      const closeSidebar = document.getElementById("close-sidebar");

      menuBtn.addEventListener("click", () => sidebar.classList.add("active"));
      closeSidebar.addEventListener("click", () => sidebar.classList.remove("active"));
    });
  </script>
</body>
</html>